# Zapier AI Prompt Template
# Workflow 02 â€” AI Lead Scoring
# Version: v3 â€” Loop Fixed
# Updated: 2026-02

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# LOOP FIX SUMMARY
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
#
# PROBLEM: "New or Updated Contact" trigger re-fired every time
#          Step 6 wrote the AI score back to the contact record.
#          This caused duplicate Slack messages + duplicate Sheets rows.
#
# FIX 1:   Change Step 1 trigger to "New Contact"
#           â†’ Only fires once on creation, not on field updates
#
# FIX 2:   Add second condition to Step 5 Filter:
#           Condition 1: Contact ID (Step 4)     â†’ Exists
#           Condition 2: AI Lead Score (Step 4)  â†’ Does Not Exist
#           â†’ If contact already scored, Zap stops silently


# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# STEP 1 â€” ACTIVECAMPAIGN TRIGGER
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# Event:  New Contact   â† use this ONLY (not "New or Updated")
# List:   New Leads


# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# STEP 2 â€” CODE BY ZAPIER (Javascript)
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# INPUT DATA KEYS (add in Zapier UI):
# Key          â†’ Map from Step 1
# firstName    â†’ Contact First Name
# lastName     â†’ Contact Last Name
# email        â†’ Contact Email Address
# jobTitle     â†’ Job Title
# company      â†’ Company
# leadSource   â†’ Lead Source

# JAVASCRIPT CODE:
output = {
  prompt: `Contact Name: ${inputData.firstName || 'Not provided'} ${inputData.lastName || ''}
Email: ${inputData.email || 'Not provided'}
Job Title: ${inputData.jobTitle || 'Not provided'}
Company: ${inputData.company || 'Not provided'}
Lead Source: ${inputData.leadSource || 'Not provided'}`
};


# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# STEP 3 â€” AI BY ZAPIER PROMPT
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

You are a B2B lead scoring specialist. Evaluate the lead and return JSON only.
No explanation, no markdown, no extra text.

Scoring criteria:
- Job title seniority: C-suite/VP/Director = higher score
- Company domain: enterprise/known brand = higher score
- Lead source: demo-request/referral = higher than newsletter/organic
- Decision-maker roles score higher than practitioners

[map â†’ prompt output from Code by Zapier Step 2]

Return exactly this JSON structure:
{
  "score": <integer 1-100>,
  "persona": "<decision_maker|influencer|practitioner|researcher>",
  "sequence": "<high-intent-fast-track|standard-nurture|cold-drip>",
  "reason": "<one sentence explanation>"
}

# NOTE: AI by Zapier auto-parses JSON â€” Score, Persona, Sequence, Reason
#       available as separate fields. No extra Code parser needed.


# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# STEP 5 â€” FILTER BY ZAPIER (DOUBLE FILTER)
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# Condition 1:
#   Field:      Contact ID (from Step 4 Find Contact)
#   Condition:  Exists
#   Value:      (leave blank)

# Condition 2:  â† NEW â€” prevents re-scoring loop
#   Field:      AI Lead Score (from Step 4 Find Contact)
#   Condition:  Does not exist
#   Value:      (leave blank)

# Result:
#   Both TRUE  â†’ Contact found + not yet scored â†’ proceed âœ…
#   Cond 1 FALSE â†’ Contact not found â†’ Zap stops silently ğŸ›‘
#   Cond 2 FALSE â†’ Already has AI score â†’ Zap stops silently ğŸ›‘


# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# STEP 7 â€” PATHS ROUTING
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# Path A (Hot):   Score >= 70  â†’  Slack #sales-hot-leads + Sheets + AC Tag
# Path B (Warm):  Score >= 40  â†’  Slack #sales-pipeline  + Sheets + AC Tag
# Path C (Cold):  Fallback     â†’  Sheets + AC Tag only (no Slack)


# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# SLACK MESSAGE TEMPLATES
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# Step 9 â€” Hot (#sales-hot-leads):
ğŸ”¥ HOT LEAD ALERT â€” Score: [Score]/100
ğŸ‘¤ [First Name] [Last Name]
ğŸ’¼ [Job Title] @ [Company]
ğŸ“§ [Email]
ğŸ¤– Persona: [Persona]
ğŸ“‹ Reason: [Reason]
ğŸ“¨ Sequence: [Sequence]

# Step 13 â€” Warm (#sales-pipeline):
âš¡ WARM LEAD â€” Score: [Score]/100
ğŸ‘¤ [First Name] [Last Name]
ğŸ’¼ [Job Title] @ [Company]
ğŸ“§ [Email]
ğŸ“¨ Sequence: [Sequence]


# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# GOOGLE SHEETS COLUMNS (Steps 10, 14, 17)
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# A: Timestamp    B: First Name   C: Last Name    D: Email
# E: Job Title    F: Company      G: Lead Source
# H: AI Score     I: AI Persona   J: AI Sequence  K: AI Reason
# L: Tier  â†’  type manually: HOT / WARM / COLD


# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# AC TAGS (Steps 11, 15, 18)
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# Step 11 (Hot):  sequence-hot-track
# Step 15 (Warm): sequence-standard-nurture
# Step 18 (Cold): sequence-cold-drip


# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# AC CUSTOM FIELDS (create in AC first)
# Lists â†’ Manage Fields â†’ Add Field
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# AI Lead Score  â†’  Number
# AI Persona     â†’  Text
# AI Sequence    â†’  Text
# AI Reason      â†’  Textarea
